import{j as e,u as ye,a as fe,r as K,t as Q,V as je,h as ve,i as be,L as Se,p as _e}from"./index-Cs3PLtAX.js";import{f as Ce,b as De,r as p}from"./vendor-react-B1g8b4mG.js";import{g as Re,R as j,s as te,h as Te,u as Ae,c as ze,b as we,a as Ne,d as Ie,i as Ee,f as ke}from"./resourceCalculations-Dzwyg67a.js";import{g as Be,T as Le}from"./timesheetCalculations-Ds9XJ3_u.js";import{S as O}from"./StatCard-DLi6jK4C.js";import{ab as Fe,c as I,h as Pe,U as se,a2 as $e,al as Me,F as We,l as He,p as Y,am as U,an as Oe,b as Ue,o as Ye,a1 as Z,ad as ee,aa as Ge}from"./vendor-icons-Ddf0jUwq.js";import"./vendor-supabase-DSZ6Ejbd.js";function Ve({form:t,onFormChange:r,onSave:a,onCancel:c,saving:m,partners:g,canSeeCostPrice:h,canSeeResourceType:x}){const n={padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",width:"100%"},s={display:"block",marginBottom:"0.25rem",fontWeight:"500",fontSize:"0.875rem"},f=Re();return e.jsxs("div",{style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Name *"}),e.jsx("input",{type:"text",style:n,value:t.name,onChange:l=>r({...t,name:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Email *"}),e.jsx("input",{type:"email",style:n,value:t.email,onChange:l=>r({...t,email:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Role"}),e.jsx("input",{type:"text",style:n,value:t.role,onChange:l=>r({...t,role:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Reference"}),e.jsx("input",{type:"text",style:n,value:t.resource_ref,onChange:l=>r({...t,resource_ref:l.target.value}),placeholder:"e.g., R01"})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"SFIA Level"}),e.jsx("select",{style:n,value:t.sfia_level,onChange:l=>r({...t,sfia_level:l.target.value}),children:f.map(l=>e.jsxs("option",{value:l.value,children:["Level ",l.label.replace("L","")]},l.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Sell Price (£/day)"}),e.jsx("input",{type:"number",style:n,value:t.sell_price,onChange:l=>r({...t,sell_price:l.target.value}),placeholder:"Customer daily rate"})]}),h&&e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Cost Price (£/day)"}),e.jsx("input",{type:"number",style:n,value:t.cost_price,onChange:l=>r({...t,cost_price:l.target.value}),placeholder:"Internal cost (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Discount %"}),e.jsx("input",{type:"number",style:n,value:t.discount_percent,onChange:l=>r({...t,discount_percent:l.target.value})})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Resource Type"}),e.jsxs("select",{style:n,value:t.resource_type,onChange:l=>r({...t,resource_type:l.target.value,partner_id:l.target.value===j.INTERNAL?"":t.partner_id}),children:[e.jsx("option",{value:j.INTERNAL,children:"Internal Supplier Resource"}),e.jsx("option",{value:j.THIRD_PARTY,children:"Third-Party Partner"})]})]}),t.resource_type===j.THIRD_PARTY&&e.jsxs("div",{children:[e.jsx("label",{style:s,children:"Partner"}),e.jsxs("select",{style:n,value:t.partner_id,onChange:l=>r({...t,partner_id:l.target.value}),children:[e.jsx("option",{value:"",children:"-- Select Partner --"}),g.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})]})]}),e.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"0.75rem"},children:[e.jsx("button",{className:"btn btn-primary",onClick:a,disabled:m,children:m?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(Fe,{size:16})," Save Changes"]})}),e.jsxs("button",{className:"btn btn-secondary",onClick:c,disabled:m,children:[e.jsx(I,{size:16})," Cancel"]})]})]})}function qe({selectedMonth:t,dateRange:r,onMonthChange:a,onDateChange:c,onClear:m,dateRangeLabel:g}){function h(){const n=[],s=new Date;for(let f=0;f<12;f++){const l=new Date(s.getFullYear(),s.getMonth()-f,1),E=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`,k=l.toLocaleDateString("en-GB",{month:"long",year:"numeric"});n.push({value:E,label:k})}return n}const x={padding:"0.5rem",borderRadius:"6px",border:"1px solid #e2e8f0",fontSize:"0.875rem"};return e.jsx("div",{className:"card",style:{marginBottom:"1.5rem",padding:"1rem"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Pe,{size:18,style:{color:"#3b82f6"}}),e.jsx("span",{style:{fontWeight:"500"},children:"Period:"})]}),e.jsxs("select",{value:t,onChange:n=>a(n.target.value),style:{...x,minWidth:"160px"},children:[e.jsx("option",{value:"",children:"Select Month..."}),h().map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))]}),e.jsx("span",{style:{color:"#64748b"},children:"or"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("input",{type:"date",value:r.start||"",onChange:n=>c("start",n.target.value),style:x}),e.jsx("span",{style:{color:"#64748b"},children:"to"}),e.jsx("input",{type:"date",value:r.end||"",onChange:n=>c("end",n.target.value),style:x})]}),(r.start||r.end)&&e.jsxs("button",{onClick:m,style:{padding:"0.5rem 0.75rem",borderRadius:"6px",border:"1px solid #e2e8f0",background:"#f8fafc",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(I,{size:14}),"Clear"]}),e.jsxs("div",{style:{marginLeft:"auto",padding:"0.5rem 0.75rem",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500"},children:["Showing: ",g]})]})})}function S({icon:t,label:r,value:a}){return e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.25rem"},children:[t," ",r]}),e.jsx("span",{style:{fontWeight:"500",marginTop:"0.25rem",display:"block"},children:a})]})}function Xe(t){switch(Te(t).cssClass){case"sfia-l6":return{bg:"#fef3c7",color:"#92400e"};case"sfia-l5":return{bg:"#dcfce7",color:"#166534"};case"sfia-l4":return{bg:"#dbeafe",color:"#1e40af"};default:return{bg:"#f1f5f9",color:"#475569"}}}function Je({resource:t,daysUsed:r,sellValue:a,canSeeResourceType:c}){const m=te(t.sfia_level),g=Xe(t.sfia_level);return e.jsx("div",{style:{padding:"1rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx(S,{icon:e.jsx(se,{size:16}),label:"Name",value:t.name}),e.jsx(S,{icon:e.jsx($e,{size:16}),label:"Email",value:t.email}),e.jsx(S,{icon:e.jsx(Me,{size:16}),label:"Role",value:t.role}),e.jsx(S,{icon:e.jsx(We,{size:16}),label:"Reference",value:t.resource_ref||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(He,{size:14})," SFIA Level"]}),e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"0.25rem 0.5rem",backgroundColor:g.bg,color:g.color,borderRadius:"4px",fontWeight:"500",marginTop:"0.25rem"},children:m})]}),e.jsx(S,{icon:e.jsx(Y,{size:16}),label:"Days Used",value:`${r?.toFixed(1)||0} days`}),e.jsx(S,{icon:e.jsx(U,{size:16}),label:"Sell Value",value:`£${(a||0).toLocaleString()}`}),c&&t.resource_type===j.THIRD_PARTY&&e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",color:"#64748b",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(Oe,{size:14})," Partner"]}),e.jsx("span",{style:{fontWeight:"500",marginTop:"0.25rem",display:"block"},children:t.partner?.name||"Not assigned"})]})]})]})})}function Ke(t){switch(t){case"Approved":case"Validated":return{bg:"#dcfce7",color:"#16a34a"};case"Submitted":return{bg:"#fef3c7",color:"#d97706"};case"Rejected":return{bg:"#fee2e2",color:"#dc2626"};default:return{bg:"#f1f5f9",color:"#64748b"}}}const Qe={Travel:{bg:"#dbeafe",color:"#1e40af"},Accommodation:{bg:"#f3e8ff",color:"#7c3aed"},Sustenance:{bg:"#fef3c7",color:"#92400e"}};function Ze({timesheets:t,dateRangeLabel:r}){return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{className:"card-title",children:"Timesheets"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#64748b"},children:[t.length," entries",r&&r!=="All Time"?` (${r})`:""]})]}),t.length>0?e.jsx("div",{style:{maxHeight:"350px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",fontSize:"0.875rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Date"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Hours"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Status"})]})}),e.jsx("tbody",{children:t.map(a=>{const c=Be(a.status);return e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.5rem"},children:new Date(a.date).toLocaleDateString("en-GB")}),e.jsxs("td",{style:{padding:"0.5rem"},children:[parseFloat(a.hours_worked||a.hours||0).toFixed(1),"h"]}),e.jsx("td",{style:{padding:"0.5rem"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:c.bg,color:c.color},children:c.label})})]},a.id)})})]})}):e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[e.jsx(Y,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsxs("p",{children:["No timesheets ",r&&r!=="All Time"?"in selected period":"recorded"]})]})]})}function et({expenses:t,dateRangeLabel:r}){return e.jsxs("div",{className:"card",style:{marginTop:"1.5rem"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{className:"card-title",children:"Expenses"}),e.jsxs("span",{style:{fontSize:"0.875rem",color:"#64748b"},children:[t.length," entries",r&&r!=="All Time"?` (${r})`:""]})]}),t.length>0?e.jsx("div",{style:{overflowX:"auto",maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{style:{width:"100%",fontSize:"0.875rem"},children:[e.jsx("thead",{style:{position:"sticky",top:0,backgroundColor:"#fff"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Date"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Category"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Reason"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right"},children:"Amount"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center"},children:"Chargeable"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Paid By"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Status"})]})}),e.jsx("tbody",{children:t.map(a=>{const c=parseFloat(a.amount)||0,m=Ke(a.status),g=Qe[a.category]||{bg:"#f1f5f9",color:"#475569"};return e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"0.75rem"},children:new Date(a.expense_date).toLocaleDateString("en-GB")}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:g.bg,color:g.color},children:a.category})}),e.jsx("td",{style:{padding:"0.75rem",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.reason||"-"}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"600"},children:["£",c.toFixed(2)]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:a.chargeable_to_customer?e.jsx(Ue,{size:16,style:{color:"#10b981"}}):e.jsx(I,{size:16,style:{color:"#94a3b8"}})}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:a.procurement_method==="partner"?"#fef3c7":"#e0f2fe",color:a.procurement_method==="partner"?"#92400e":"#0369a1"},children:a.procurement_method==="partner"?"Partner":"Supplier"})}),e.jsx("td",{style:{padding:"0.75rem"},children:e.jsx("span",{style:{padding:"0.15rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:m.bg,color:m.color},children:a.status||"Draft"})})]},a.id)})})]})}):e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[e.jsx(Ye,{size:32,style:{marginBottom:"0.5rem",opacity:.5}}),e.jsxs("p",{children:["No expenses ",r&&r!=="All Time"?"in selected period":"recorded"]})]})]})}function ot(){const{id:t}=Ce(),r=De(),{user:a,role:c}=ye(),{projectId:m}=fe(),{canEdit:g,canSeeCostPrice:h,canSeeResourceType:x,canSeeMargins:n}=Ae(),[s,f]=p.useState(null),[l,E]=p.useState([]),[k,re]=p.useState([]),[le,ae]=p.useState([]),[ne,B]=p.useState(!0),[ie,G]=p.useState(!1),[v,L]=p.useState(!1),[D,b]=p.useState(null),[o,R]=p.useState({start:null,end:null}),[F,P]=p.useState(""),[d,V]=p.useState({});p.useEffect(()=>{t&&q()},[t,o.start,o.end]),p.useEffect(()=>{async function i(){if(s?.project_id&&c&&["admin","supplier_pm"].includes(c))try{const u=await _e.getAll(s.project_id,{filters:[{column:"is_active",operator:"eq",value:!0}],select:"id, name, is_active",orderBy:{column:"name",ascending:!0}});E(u||[])}catch{}}i()},[s?.project_id,c]);async function q(){try{B(!0),b(null);const i=await K.getById(t,{select:"*, partner:partners(id, name, contact_name, contact_email, is_active)"});if(!i){b("Resource not found"),B(!1);return}const u=await Q.getAll(i.project_id,{filters:[{column:"resource_id",operator:"eq",value:t}],select:"id, hours_worked, hours, status, was_rejected"});let y=0,w=0,N=0;u&&u.forEach(C=>{const H=parseFloat(C.hours_worked||C.hours||0);y+=H,je.timesheets.completed.includes(C.status)?w+=H:C.status===Le.SUBMITTED&&!C.was_rejected&&(N+=H)}),f({...i,timesheetSummary:{totalEntries:u?.length||0,totalHours:y,approvedHours:w,pendingHours:N,daysWorked:ve(y)}});const M=[{column:"resource_id",operator:"eq",value:t}];o.start&&M.push({column:"date",operator:"gte",value:o.start}),o.end&&M.push({column:"date",operator:"lte",value:o.end});const xe=await Q.getAll(i.project_id,{filters:M,select:"id, date, hours_worked, hours, status, description, milestone:milestones(milestone_ref, name)",orderBy:{column:"date",ascending:!1}});re((xe||[]).slice(0,100));const W=[{column:"resource_id",operator:"eq",value:t}];o.start&&W.push({column:"expense_date",operator:"gte",value:o.start}),o.end&&W.push({column:"expense_date",operator:"lte",value:o.end});const he=await be.getAll(i.project_id,{filters:W,select:"id, expense_date, category, reason, amount, chargeable_to_customer, procurement_method, status",orderBy:{column:"expense_date",ascending:!1}});ae((he||[]).slice(0,100))}catch(i){b(i.message)}finally{B(!1)}}function oe(i){if(P(i),i){const[u,y]=i.split("-").map(Number),w=new Date(u,y-1,1),N=new Date(u,y,0);R({start:w.toISOString().split("T")[0],end:N.toISOString().split("T")[0]})}else R({start:null,end:null})}function ce(i,u){P(""),R(y=>({...y,[i]:u}))}function de(){P(""),R({start:null,end:null})}function $(){if(!o.start&&!o.end)return"All Time";if(F){const[i,u]=F.split("-").map(Number);return new Date(i,u-1,1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}return o.start&&o.end?`${new Date(o.start).toLocaleDateString("en-GB")} - ${new Date(o.end).toLocaleDateString("en-GB")}`:o.start?`From ${new Date(o.start).toLocaleDateString("en-GB")}`:o.end?`Until ${new Date(o.end).toLocaleDateString("en-GB")}`:"All Time"}function ue(){V({name:s.name||"",email:s.email||"",role:s.role||"",resource_ref:s.resource_ref||"",sfia_level:te(s.sfia_level),sell_price:s.sell_price||"",cost_price:s.cost_price||"",discount_percent:s.discount_percent||0,resource_type:s.resource_type||j.INTERNAL,partner_id:s.partner_id||""}),L(!0)}async function pe(){try{G(!0),b(null);const i={name:d.name,email:d.email,role:d.role,resource_ref:d.resource_ref,sfia_level:ke(d.sfia_level),sell_price:parseFloat(d.sell_price)||0,discount_percent:parseFloat(d.discount_percent)||0,resource_type:d.resource_type,partner_id:d.resource_type===j.THIRD_PARTY&&d.partner_id||null};h&&(i.cost_price=d.cost_price===""?null:parseFloat(d.cost_price)),await K.update(t,i),await q(),L(!1)}catch(i){b("Failed to save: "+i.message)}finally{G(!1)}}if(ne)return e.jsx(Se,{message:"Loading resource...",size:"large",fullPage:!0});if(D&&!s)return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"card",style:{textAlign:"center",padding:"3rem"},children:[e.jsx(Z,{size:48,style:{color:"#f59e0b",marginBottom:"1rem"}}),e.jsx("h2",{children:"Resource Not Found"}),e.jsx("p",{style:{color:"#64748b",marginBottom:"1.5rem"},children:D}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>r("/resources"),children:[e.jsx(ee,{size:16})," Back to Resources"]})]})});const _=ze(s.sell_price,s.cost_price),T=we(_.percent),me=T.icon,A=Ne(s.resource_type),ge=A.icon,z=s.timesheetSummary?.daysWorked||0,X=Ie(z,s.sell_price),J=h?Ee(z,s.cost_price):null;return e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"page-title",children:[e.jsx("button",{onClick:()=>r("/resources"),className:"btn btn-secondary",style:{marginRight:"1rem",padding:"0.5rem"},children:e.jsx(ee,{size:20})}),e.jsx(se,{size:28}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("h1",{children:s.name}),x&&e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",padding:"0.35rem 0.75rem",backgroundColor:A.bg,color:A.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"500"},children:[e.jsx(ge,{size:14}),A.label]})]}),e.jsxs("p",{style:{color:"#64748b"},children:[s.role," • ",s.email]})]})]}),g&&!v&&e.jsxs("button",{className:"btn btn-primary",onClick:ue,children:[e.jsx(Ge,{size:18})," Edit Resource"]})]}),D&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Z,{size:18}),D,e.jsx("button",{onClick:()=>b(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer"},children:e.jsx(I,{size:18})})]}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:"1.5rem"},children:[e.jsx(O,{icon:Y,label:"Days Used",value:z.toFixed(1),subtext:`${s.timesheetSummary?.totalHours?.toFixed(1)||0} hours logged`,color:"#3b82f6"}),e.jsx(O,{icon:U,label:"Sell Value",value:`£${X.toLocaleString()}`,subtext:`@ £${s.sell_price}/day`,color:"#10b981"}),h&&e.jsx(O,{icon:U,label:"Cost Value",value:J!==null?`£${J.toLocaleString()}`:"N/A",subtext:s.cost_price?`@ £${s.cost_price}/day`:"No cost set",color:"#6366f1"}),n&&e.jsxs("div",{className:"stat-card",style:{borderLeft:`4px solid ${T.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(me,{size:20,style:{color:T.color}}),e.jsx("span",{className:"stat-label",children:"Margin"})]}),e.jsx("div",{className:"stat-value",style:{color:T.color},children:_.percent!==null?`${_.percent.toFixed(1)}%`:"N/A"}),_.amount!==null&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["£",_.amount.toFixed(0)," per day"]})]})]}),e.jsx(qe,{selectedMonth:F,dateRange:o,onMonthChange:oe,onDateChange:ce,onClear:de,dateRangeLabel:$()}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:v?"1fr":"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:v?"Edit Resource Details":"Resource Details"})}),v?e.jsx(Ve,{form:d,onFormChange:V,onSave:pe,onCancel:()=>L(!1),saving:ie,partners:l,canSeeCostPrice:h,canSeeResourceType:x}):e.jsx(Je,{resource:s,daysUsed:z,sellValue:X,canSeeResourceType:x})]}),!v&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:e.jsx(Ze,{timesheets:k,dateRangeLabel:$()})})]}),!v&&e.jsx(et,{expenses:le,dateRangeLabel:$()})]})}export{ot as default};
