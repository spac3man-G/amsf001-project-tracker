import{u as ze,a as Re,b as ke,d as Le,r as p,s as h,j as e,L as Ie,P as Te,p as ee,S as z,D as Fe,k as se,i as E,X as re,f as De,T as Pe,B as te}from"./index-C9_NAjB1.js";import{u as Ee}from"./usePermissions-DQns1k0G.js";import{C as Ae}from"./ConfirmDialog-CdZGPmkx.js";import{P as Me}from"./plus-BYTNs6mC.js";import{S as ae}from"./save-DzFhfLqy.js";import{E as We}from"./external-link-tpKEMk49.js";import{P as Be}from"./pen-B7QJIzNl.js";import{M as A,T as le,L as ne}from"./trending-down-DyyLWCV0.js";function Ye(){const ie=ze(),{user:R,role:k}=Re(),{projectId:M}=ke(),{showSuccess:W,showError:_,showWarning:oe}=Le(),de=(R==null?void 0:R.id)||null,{canManageResources:B,canSeeResourceType:y,canSeeCostPrice:i}=Ee(),[S,ce]=p.useState([]),[U,ue]=p.useState({}),[pe,me]=p.useState(!0),[he,L]=p.useState(null),[a,x]=p.useState({}),[ge,I]=p.useState(!1),[T,xe]=p.useState("all"),[o,C]=p.useState({isOpen:!1,resource:null,dependents:null}),[fe,$]=p.useState(!1),[t,d]=p.useState({resource_ref:"",name:"",email:"",role:"",sfia_level:"L4",daily_rate:"",cost_price:"",discount_percent:0,days_allocated:"",days_used:0,resource_type:"internal"});p.useEffect(()=>{M&&w()},[M]);async function w(){try{const{data:s,error:r}=await h.from("resources").select("*").order("name");if(r)throw r;ce(s||[]);const{data:n}=await h.from("timesheets").select("resource_id, hours_worked, hours, status, was_rejected"),l={};n&&n.forEach(c=>{if(!(c.status==="Approved"||c.status==="Submitted"&&!c.was_rejected))return;const g=parseFloat(c.hours_worked||c.hours||0);l[c.resource_id]=(l[c.resource_id]||0)+g}),ue(l)}catch(s){console.error("Error fetching resources:",s)}finally{me(!1)}}function F(s){return s?typeof s=="string"&&s.startsWith("L")?s:`L${s}`:"L4"}function O(s){return s?typeof s=="number"?s:typeof s=="string"&&s.startsWith("L")?parseInt(s.substring(1))||4:parseInt(s)||4:4}function q(s,r){return!s||s===0||!r?null:(s-r)/s*100}function G(s){return s===null?{color:"#9ca3af",bg:"#f1f5f9",label:"N/A",icon:A}:s>=25?{color:"#16a34a",bg:"#dcfce7",label:"Good",icon:E}:s>=10?{color:"#d97706",bg:"#fef3c7",label:"Low",icon:A}:{color:"#dc2626",bg:"#fee2e2",label:"Critical",icon:le}}async function ye(s){L(s.id),x({name:s.name,email:s.email,role:s.role,sfia_level:F(s.sfia_level),daily_rate:s.daily_rate,cost_price:s.cost_price||"",discount_percent:s.discount_percent,days_allocated:s.days_allocated,days_used:s.days_used,resource_type:s.resource_type||"internal"})}async function je(s){try{const r={name:a.name,email:a.email,role:a.role,sfia_level:O(a.sfia_level),daily_rate:parseFloat(a.daily_rate)||0,discount_percent:parseFloat(a.discount_percent)||0,days_allocated:parseInt(a.days_allocated)||0,days_used:parseFloat(a.days_used)||0,resource_type:a.resource_type||"internal"};i&&(a.cost_price===""||a.cost_price===null||a.cost_price===void 0?r.cost_price=null:r.cost_price=parseFloat(a.cost_price)),console.log("=== RESOURCE UPDATE DEBUG ==="),console.log("Resource ID:",s),console.log("User role:",k),console.log("canSeeCostPrice:",i),console.log("editForm:",a),console.log("updateData being sent:",JSON.stringify(r,null,2));const{data:n,error:l}=await h.from("resources").update(r).eq("id",s).select();if(console.log("Supabase response - error:",l),console.log("Supabase response - data:",n),console.log("=== END DEBUG ==="),l)throw l;if(!n||n.length===0)throw new Error("Update was blocked by database security policy. You may not have permission to update this resource.");await w(),L(null),W("Resource updated successfully!")}catch(r){console.error("Error updating resource:",r),_("Failed to update resource: "+r.message)}}async function be(){try{const{data:s}=await h.from("profiles").select("id").eq("email",t.email).single();if(!s){oe("This email is not registered in the system. They need to sign up first.");return}const{data:r}=await h.from("projects").select("id").eq("reference","AMSF001").single();if(!r){_("Project not found");return}const n={...t,project_id:r.id,user_id:s.id,sfia_level:O(t.sfia_level),daily_rate:parseFloat(t.daily_rate),cost_price:t.cost_price?parseFloat(t.cost_price):null,days_allocated:parseInt(t.days_allocated),discount_percent:parseFloat(t.discount_percent)||0,created_by:de},{error:l}=await h.from("resources").insert([n]);if(l)throw l;await w(),I(!1),d({resource_ref:"",name:"",email:"",role:"",sfia_level:"L4",daily_rate:"",cost_price:"",discount_percent:0,days_allocated:"",days_used:0,resource_type:"internal"}),W("Resource added successfully!")}catch(s){console.error("Error adding resource:",s),_("Failed to add resource: "+s.message)}}async function ve(s){try{const[r,n]=await Promise.all([h.from("timesheets").select("id",{count:"exact",head:!0}).eq("resource_id",s.id),h.from("expenses").select("id",{count:"exact",head:!0}).eq("resource_id",s.id)]),l=r.count||0,c=n.count||0;C({isOpen:!0,resource:s,dependents:{timesheets:l,expenses:c}})}catch(r){console.error("Error checking dependents:",r),C({isOpen:!0,resource:s,dependents:null})}}async function _e(){const s=o.resource;if(s){$(!0);try{const{error:r}=await h.from("resources").delete().eq("id",s.id);if(r)throw r;await w(),C({isOpen:!1,resource:null,dependents:null})}catch(r){console.error("Error deleting resource:",r),_("Failed to delete resource")}finally{$(!1)}}}const Se=s=>{switch(F(s)){case"L6":return"badge-warning";case"L5":return"badge-success";case"L4":return"badge-primary";case"L3":return"badge-secondary";default:return"badge-secondary"}},Ce=s=>s==="third_party"?{bg:"#fef3c7",color:"#92400e",icon:ne,label:"Third-Party Partner"}:{bg:"#dbeafe",color:"#1e40af",icon:te,label:"Internal Resource"},f=S.filter(s=>T==="all"?!0:(s.resource_type||"internal")===T),we=f.reduce((s,r)=>s+(r.daily_rate||0)*(r.days_allocated||0),0),D=f.reduce((s,r)=>s+(r.days_allocated||0),0),H=f.reduce((s,r)=>s+(U[r.id]||0),0)/8,J=D>0?Math.round(H/D*100):0,X=S.filter(s=>(s.resource_type||"internal")==="internal").length,V=S.filter(s=>s.resource_type==="third_party").length,Y=f.filter(s=>s.cost_price&&s.daily_rate),b=Y.reduce((s,r)=>s+(r.daily_rate||0)*(r.days_allocated||0),0),K=Y.reduce((s,r)=>s+(r.cost_price||0)*(r.days_allocated||0),0),P=b>0?(b-K)/b*100:null,Q=G(P),m={good:0,low:0,critical:0,unknown:0};return f.forEach(s=>{const r=q(s.daily_rate,s.cost_price);r===null?m.unknown++:r>=25?m.good++:r>=10?m.low++:m.critical++}),pe?e.jsx(Ie,{message:"Loading resources...",size:"large",fullPage:!0}):e.jsxs("div",{className:"page-container",children:[e.jsx(Te,{icon:ee,title:"Team Resources",subtitle:"Manage project team allocation and utilization",children:k==="admin"&&e.jsxs("button",{className:"btn btn-primary",onClick:()=>I(!0),children:[e.jsx(Me,{size:18})," Add Resource"]})}),e.jsxs("div",{className:"stats-grid",style:{marginBottom:"1rem"},children:[e.jsx(z,{icon:ee,label:"Team Members",value:f.length,subtext:y?`${X} internal, ${V} third-party`:void 0,color:"#3b82f6"}),e.jsx(z,{icon:Fe,label:"Resource Budget",value:`Â£${we.toLocaleString()}`,color:"#10b981"}),e.jsx(z,{icon:se,label:"Days Allocated",value:D,color:"#3b82f6"}),e.jsx(z,{icon:E,label:"Utilization",value:`${J}%`,subtext:`${H.toFixed(1)} days used`,color:J>0?"#10b981":"#64748b"})]}),i&&e.jsxs("div",{className:"stats-grid",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"stat-card",style:{borderLeft:`4px solid ${Q.color}`},children:[e.jsx("div",{className:"stat-value",style:{color:Q.color},children:P!==null?`${P.toFixed(1)}%`:"N/A"}),e.jsx("div",{className:"stat-label",children:"Overall Margin"}),b>0&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["Â£",(b-K).toLocaleString()," profit"]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",style:{color:"#16a34a"},children:m.good}),e.jsx("div",{className:"stat-label",children:"Good Margin (â‰¥25%)"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",style:{color:"#d97706"},children:m.low}),e.jsx("div",{className:"stat-label",children:"Low Margin (10-25%)"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-value",style:{color:m.critical>0?"#dc2626":"#64748b"},children:m.critical}),e.jsx("div",{className:"stat-label",children:"Critical (<10%)"}),m.unknown>0&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:[m.unknown," not set"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("h2",{className:"card-title",children:"Team Resources"}),y&&e.jsxs("select",{value:T,onChange:s=>xe(s.target.value),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #d1d5db",fontSize:"0.875rem"},children:[e.jsxs("option",{value:"all",children:["All Resources (",S.length,")"]}),e.jsxs("option",{value:"internal",children:["Internal Only (",X,")"]}),e.jsxs("option",{value:"third_party",children:["Third-Party Only (",V,")"]})]})]})}),ge&&e.jsxs("div",{style:{padding:"1rem",borderBottom:"2px solid var(--border)"},children:[e.jsx("h3",{style:{marginBottom:"1rem"},children:"Add New Resource"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("input",{className:"input-field",placeholder:"Reference (e.g., R01)",value:t.resource_ref,onChange:s=>d({...t,resource_ref:s.target.value})}),e.jsx("input",{className:"input-field",placeholder:"Full Name",value:t.name,onChange:s=>d({...t,name:s.target.value})}),e.jsx("input",{className:"input-field",placeholder:"Email",type:"email",value:t.email,onChange:s=>d({...t,email:s.target.value})}),e.jsx("input",{className:"input-field",placeholder:"Role",value:t.role,onChange:s=>d({...t,role:s.target.value})}),e.jsxs("select",{className:"input-field",value:t.sfia_level,onChange:s=>d({...t,sfia_level:s.target.value}),children:[e.jsx("option",{value:"L3",children:"SFIA Level 3"}),e.jsx("option",{value:"L4",children:"SFIA Level 4"}),e.jsx("option",{value:"L5",children:"SFIA Level 5"}),e.jsx("option",{value:"L6",children:"SFIA Level 6"})]}),e.jsx("input",{className:"input-field",placeholder:"Daily Rate (Â£) - Customer",type:"number",value:t.daily_rate,onChange:s=>d({...t,daily_rate:s.target.value})}),i&&e.jsx("input",{className:"input-field",placeholder:"Cost Price (Â£) - Internal",type:"number",value:t.cost_price,onChange:s=>d({...t,cost_price:s.target.value})}),e.jsx("input",{className:"input-field",placeholder:"Discount %",type:"number",value:t.discount_percent,onChange:s=>d({...t,discount_percent:s.target.value})}),e.jsx("input",{className:"input-field",placeholder:"Days Allocated",type:"number",value:t.days_allocated,onChange:s=>d({...t,days_allocated:s.target.value})}),e.jsxs("select",{className:"input-field",value:t.resource_type,onChange:s=>d({...t,resource_type:s.target.value}),children:[e.jsx("option",{value:"internal",children:"Internal Supplier Resource"}),e.jsx("option",{value:"third_party",children:"Third-Party Partner"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-primary",onClick:be,children:[e.jsx(ae,{size:16})," Save"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>I(!1),children:[e.jsx(re,{size:16})," Cancel"]})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),y&&e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"SFIA Level"}),e.jsx("th",{children:"Daily Rate"}),i&&e.jsx("th",{children:"Cost Price"}),i&&e.jsx("th",{children:"Margin"}),e.jsx("th",{children:"Days"}),e.jsx("th",{children:"Utilization"}),e.jsx("th",{children:"Total Value"}),B&&e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:f.map(s=>{const r=U[s.id]||0,n=r/8,l=s.days_allocated||0,c=Math.max(0,l-n),j=l>0?n/l*100:0,g=Ce(s.resource_type),Z=g.icon,N=q(s.daily_rate,s.cost_price),v=G(N),Ne=v.icon;return e.jsx("tr",{children:he===s.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx("input",{className:"input-field",value:a.name,onChange:u=>x({...a,name:u.target.value})})}),y&&e.jsx("td",{children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",padding:"0.35rem 0.65rem",backgroundColor:g.bg,color:g.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500"},title:"Edit resource type from detail page",children:[e.jsx(Z,{size:14}),s.resource_type==="third_party"?"3rd Party":"Internal"]})}),e.jsx("td",{children:e.jsx("input",{className:"input-field",value:a.role,onChange:u=>x({...a,role:u.target.value})})}),e.jsx("td",{children:e.jsxs("select",{className:"input-field",value:a.sfia_level,onChange:u=>x({...a,sfia_level:u.target.value}),children:[e.jsx("option",{value:"L3",children:"L3"}),e.jsx("option",{value:"L4",children:"L4"}),e.jsx("option",{value:"L5",children:"L5"}),e.jsx("option",{value:"L6",children:"L6"})]})}),e.jsx("td",{children:e.jsx("input",{className:"input-field",type:"number",value:a.daily_rate,onChange:u=>x({...a,daily_rate:u.target.value}),style:{width:"80px"}})}),i&&e.jsx("td",{children:e.jsx("input",{className:"input-field",type:"number",value:a.cost_price,onChange:u=>x({...a,cost_price:u.target.value}),placeholder:"Cost",style:{width:"80px"}})}),i&&e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx("input",{className:"input-field",type:"number",value:a.days_allocated,onChange:u=>x({...a,days_allocated:u.target.value}),style:{width:"60px"}})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>je(s.id),children:e.jsx(ae,{size:16})}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>L(null),children:e.jsx(re,{size:16})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsxs("div",{onClick:()=>ie(`/resources/${s.id}`),style:{cursor:"pointer"},title:"Click to view details",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("strong",{style:{color:"#2563eb"},children:s.name}),e.jsx(We,{size:14,style:{color:"#9ca3af"}})]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-light)"},children:s.email})]})}),y&&e.jsx("td",{children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",padding:"0.35rem 0.65rem",backgroundColor:g.bg,color:g.color,borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500"},title:g.label,children:[e.jsx(Z,{size:14}),s.resource_type==="third_party"?"3rd Party":"Internal"]})}),e.jsx("td",{children:s.role}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${Se(s.sfia_level)}`,children:[e.jsx(De,{size:14,style:{marginRight:"0.25rem"}}),F(s.sfia_level)]})}),e.jsxs("td",{children:["Â£",s.daily_rate]}),i&&e.jsx("td",{children:s.cost_price?e.jsxs("span",{style:{fontFamily:"monospace"},children:["Â£",s.cost_price]}):e.jsx("span",{style:{color:"#9ca3af",fontSize:"0.85rem"},children:"Not set"})}),i&&e.jsx("td",{children:e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:v.bg,color:v.color,borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},title:N!==null?`${v.label} margin`:"Cost price not set",children:[e.jsx(Ne,{size:14}),N!==null?`${N.toFixed(0)}%`:"N/A"]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{style:{fontWeight:"500"},children:n.toFixed(1)}),e.jsx("span",{style:{color:"var(--text-light)"},children:"/"}),e.jsx("span",{children:l})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--text-light)"},children:[c.toFixed(1)," remaining"]}),r>0&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#10b981",display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx(se,{size:12})," ",r.toFixed(1),"h logged"]})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-bar-fill",style:{width:`${Math.min(j,100)}%`,background:j>100?"var(--danger)":j>0?"var(--primary)":"#e2e8f0"}})}),e.jsxs("span",{style:{fontSize:"0.875rem",color:j>0?"inherit":"#9ca3af"},children:[Math.round(j),"%"]})]})}),e.jsxs("td",{children:[e.jsxs("strong",{children:["Â£",((s.daily_rate||0)*(s.days_allocated||0)).toLocaleString()]}),i&&s.cost_price&&e.jsxs("div",{style:{fontSize:"0.75rem",color:v.color},children:["Â£",(((s.daily_rate||0)-(s.cost_price||0))*(s.days_allocated||0)).toLocaleString()," profit"]})]}),B&&e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>ye(s),title:"Edit resource",children:e.jsx(Be,{size:16})}),k==="admin"&&e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>ve(s),title:"Delete resource",children:e.jsx(Pe,{size:16})})]})})]})},s.id)})})]})})]}),i&&e.jsxs("div",{className:"card",style:{marginTop:"1.5rem",backgroundColor:"#f8fafc"},children:[e.jsx("h4",{style:{marginBottom:"0.75rem"},children:"ðŸ“Š Margin Guide"}),e.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:"#dcfce7",color:"#16a34a",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:[e.jsx(E,{size:14}),"â‰¥25%"]}),e.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Good margin - healthy profitability"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:"#fef3c7",color:"#d97706",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:[e.jsx(A,{size:14}),"10-25%"]}),e.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Low margin - review pricing"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.5rem",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:[e.jsx(le,{size:14}),"<10%"]}),e.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Critical - action required"})]})]}),e.jsxs("p",{style:{fontSize:"0.85rem",color:"#64748b",margin:0},children:[e.jsx("strong",{children:"Margin"})," = (Daily Rate - Cost Price) Ã· Daily Rate Ã— 100. Cost price and margin data is only visible to Admin and Supplier PM."]})]}),y&&e.jsxs("div",{className:"card",style:{marginTop:"1rem",backgroundColor:"#f8fafc"},children:[e.jsx("h4",{style:{marginBottom:"0.75rem"},children:"ðŸ“‹ Resource Types"}),e.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",padding:"0.35rem 0.65rem",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"6px",fontSize:"0.85rem"},children:[e.jsx(te,{size:14}),"Internal"]}),e.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"Internal JT/Supplier staff allocated to the project"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem",padding:"0.35rem 0.65rem",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"6px",fontSize:"0.85rem"},children:[e.jsx(ne,{size:14}),"Third-Party"]}),e.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:"External partners/contractors engaged for the project"})]})]}),e.jsxs("p",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"#64748b"},children:[e.jsx("strong",{children:"Note:"})," Resource type is only visible to Admin and Supplier PM. Click on the type badge to toggle between Internal and Third-Party."]})]}),e.jsx("style",{jsx:!0,children:`
        .form-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 1rem;
        }
        
        .input-field {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border);
          border-radius: 4px;
        }
        
        .badge {
          display: inline-flex;
          align-items: center;
          padding: 0.25rem 0.5rem;
          border-radius: 4px;
          font-size: 0.875rem;
        }
        
        .badge-success {
          background: #dcfce7;
          color: #166534;
        }
        
        .badge-primary {
          background: #dbeafe;
          color: #1e40af;
        }
        
        .badge-secondary {
          background: #f1f5f9;
          color: #475569;
        }
        
        .badge-warning {
          background: #fef3c7;
          color: #92400e;
        }
        
        .progress-bar {
          width: 60px;
          height: 6px;
          background: #e2e8f0;
          border-radius: 3px;
          overflow: hidden;
          margin-bottom: 0.25rem;
        }
        
        .progress-bar-fill {
          height: 100%;
          border-radius: 3px;
        }
        
        .btn-danger {
          background: #fee2e2;
          color: #dc2626;
          border: none;
          cursor: pointer;
          padding: 0.5rem;
          border-radius: 4px;
        }
        
        .btn-danger:hover {
          background: #fecaca;
        }
        
        .btn-secondary {
          background: #f1f5f9;
          color: #475569;
          border: none;
          cursor: pointer;
          padding: 0.5rem;
          border-radius: 4px;
        }
        
        .btn-primary {
          background: var(--primary);
          color: white;
        }
        
        .btn-sm {
          padding: 0.25rem 0.5rem;
          font-size: 0.875rem;
        }
      `}),e.jsx(Ae,{isOpen:o.isOpen,onClose:()=>C({isOpen:!1,resource:null,dependents:null}),onConfirm:_e,title:"Delete Resource?",message:o.resource?e.jsxs(e.Fragment,{children:['This will permanently delete "',e.jsx("strong",{children:o.resource.name}),'" from the project.',o.dependents&&(o.dependents.timesheets>0||o.dependents.expenses>0)&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{style:{color:"#dc2626",fontWeight:"500"},children:"âš ï¸ Warning: This will also delete:"}),e.jsxs("ul",{style:{margin:"0.5rem 0 0 1.5rem",color:"#dc2626"},children:[o.dependents.timesheets>0&&e.jsxs("li",{children:[o.dependents.timesheets," timesheet entries"]}),o.dependents.expenses>0&&e.jsxs("li",{children:[o.dependents.expenses," expense records"]})]})]}),e.jsx("br",{}),"This action cannot be undone."]}):"",confirmText:"Delete",cancelText:"Cancel",type:"danger",isLoading:fe})]})}export{Ye as default};
