import{u as N,c as F}from"./index-CZifL8RL.js";import{al as G,j as U,am as d,a3 as j,z as w}from"./vendor-icons-BfsEacNp.js";function B(e=null){const{user:n,role:t,profile:a,linkedResource:r}=N(),s=F(),o=t==="admin",b=t==="supplier_pm",g=t==="customer_pm",T=t==="contributor",i=n?.id||null,O=a?.full_name||n?.email||"Unknown",L=r?.id||null,I=!e||!i?!1:e.user_id===i||e.id===L,S=!0,E=o,u=s.canEditResource,l=s.canDeleteResource,m=s.canManageResources,A=!0,P=s.canSeeCostPrice,h=s.canSeeMargins,D=s.canSeeResourceType,_=o||b,y=s.canManagePartners,M=s.canViewPartners;return{currentUserId:i,currentUserName:O,currentUserResourceId:L,userRole:t,isAdmin:o,isSupplierPM:b,isCustomerPM:g,isContributor:T,isOwnResource:I,canView:S,canCreate:E,canEdit:u,canDelete:l,canManage:m,canEditThis:u,canDeleteThis:l,canSeeSellPrice:A,canSeeCostPrice:P,canSeeMargins:h,canSeeResourceType:D,canEditFinancials:_,canLinkToPartner:y,canViewPartner:M}}const f=Object.freeze({INTERNAL:"internal",THIRD_PARTY:"third_party"}),C=Object.freeze({[f.INTERNAL]:{label:"Internal Supplier",shortLabel:"Internal",bg:"#dbeafe",color:"#1e40af",icon:U,cssClass:"type-internal"},[f.THIRD_PARTY]:{label:"Third-Party Partner",shortLabel:"3rd Party",bg:"#fef3c7",color:"#92400e",icon:G,cssClass:"type-third-party"}}),p=Object.freeze({L3:{value:3,label:"L3",cssClass:"sfia-default"},L4:{value:4,label:"L4",cssClass:"sfia-l4"},L5:{value:5,label:"L5",cssClass:"sfia-l5"},L6:{value:6,label:"L6",cssClass:"sfia-l6"}}),V="L4";function $(e){return C[e]||C[f.INTERNAL]}function z(e){return e?typeof e=="string"&&e.startsWith("L")?e:`L${e}`:V}function q(e){return e?typeof e=="number"?e:typeof e=="string"&&e.startsWith("L")?parseInt(e.substring(1))||4:parseInt(e)||4:4}function W(e){const n=z(e);return p[n]||p.L4}function J(e){return W(e).cssClass}function K(){return Object.values(p).map(e=>({value:e.label,label:e.label}))}const R=Object.freeze({GOOD:25,LOW:10,CRITICAL:0}),c=Object.freeze({GOOD:{label:"Good",color:"#16a34a",bg:"#dcfce7",icon:w},LOW:{label:"Low",color:"#d97706",bg:"#fef3c7",icon:d},CRITICAL:{label:"Critical",color:"#dc2626",bg:"#fee2e2",icon:j},NA:{label:"N/A",color:"#9ca3af",bg:"#f1f5f9",icon:d}});function Q(e,n){const t=parseFloat(e)||0,a=parseFloat(n)||0;if(t===0||a===0)return{percent:null,amount:null};const r=t-a,s=r/t*100;return{percent:Math.round(s*10)/10,amount:Math.round(r*100)/100}}function X(e){return e==null?c.NA:e>=R.GOOD?c.GOOD:e>=R.LOW?c.LOW:c.CRITICAL}function Z(e,n){return(parseFloat(e)||0)*(parseFloat(n)||0)}function v(e,n){return(parseFloat(e)||0)*(parseFloat(n)||0)}export{f as R,$ as a,X as b,Q as c,Z as d,J as e,q as f,K as g,W as h,v as i,z as s,B as u};
