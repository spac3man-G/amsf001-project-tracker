import{u as N,n as F,d as G}from"./index-IaXQkjEL.js";import{au as U,n as j,av as d,af as w,W as V}from"./vendor-icons-C6BNM9_X.js";function $(e=null){const{user:n,profile:a,linkedResource:r}=N(),{effectiveRole:t}=F(),s=G(),o=t==="admin",b=t==="supplier_pm",g=t==="customer_pm",T=t==="contributor",i=n?.id||null,O=a?.full_name||n?.email||"Unknown",L=r?.id||null,I=!e||!i?!1:e.user_id===i||e.id===L,S=!0,E=o,u=s.canEditResource,l=s.canDeleteResource,m=s.canManageResources,A=!0,P=s.canSeeCostPrice,h=s.canSeeMargins,D=s.canSeeResourceType,_=o||b,y=s.canManagePartners,M=s.canViewPartners;return{currentUserId:i,currentUserName:O,currentUserResourceId:L,userRole:t,isAdmin:o,isSupplierPM:b,isCustomerPM:g,isContributor:T,isOwnResource:I,canView:S,canCreate:E,canEdit:u,canDelete:l,canManage:m,canEditThis:u,canDeleteThis:l,canSeeSellPrice:A,canSeeCostPrice:P,canSeeMargins:h,canSeeResourceType:D,canEditFinancials:_,canLinkToPartner:y,canViewPartner:M}}const f=Object.freeze({INTERNAL:"internal",THIRD_PARTY:"third_party"}),R=Object.freeze({[f.INTERNAL]:{label:"Internal Supplier",shortLabel:"Internal",bg:"#dbeafe",color:"#1e40af",icon:j,cssClass:"type-internal"},[f.THIRD_PARTY]:{label:"Third-Party Partner",shortLabel:"3rd Party",bg:"#fef3c7",color:"#92400e",icon:U,cssClass:"type-third-party"}}),p=Object.freeze({L3:{value:3,label:"L3",cssClass:"sfia-default"},L4:{value:4,label:"L4",cssClass:"sfia-l4"},L5:{value:5,label:"L5",cssClass:"sfia-l5"},L6:{value:6,label:"L6",cssClass:"sfia-l6"}}),W="L4";function q(e){return R[e]||R[f.INTERNAL]}function z(e){return e?typeof e=="string"&&e.startsWith("L")?e:`L${e}`:W}function J(e){return e?typeof e=="number"?e:typeof e=="string"&&e.startsWith("L")?parseInt(e.substring(1))||4:parseInt(e)||4:4}function k(e){const n=z(e);return p[n]||p.L4}function K(e){return k(e).cssClass}function Q(){return Object.values(p).map(e=>({value:e.label,label:e.label}))}const C=Object.freeze({GOOD:25,LOW:10,CRITICAL:0}),c=Object.freeze({GOOD:{label:"Good",color:"#16a34a",bg:"#dcfce7",icon:V},LOW:{label:"Low",color:"#d97706",bg:"#fef3c7",icon:d},CRITICAL:{label:"Critical",color:"#dc2626",bg:"#fee2e2",icon:w},NA:{label:"N/A",color:"#9ca3af",bg:"#f1f5f9",icon:d}});function X(e,n){const a=parseFloat(e)||0,r=parseFloat(n)||0;if(a===0||r===0)return{percent:null,amount:null};const t=a-r,s=t/a*100;return{percent:Math.round(s*10)/10,amount:Math.round(t*100)/100}}function Z(e){return e==null?c.NA:e>=C.GOOD?c.GOOD:e>=C.LOW?c.LOW:c.CRITICAL}function v(e,n){return(parseFloat(e)||0)*(parseFloat(n)||0)}function ee(e,n){return(parseFloat(e)||0)*(parseFloat(n)||0)}export{f as R,q as a,Z as b,X as c,v as d,K as e,J as f,Q as g,k as h,ee as i,z as s,$ as u};
